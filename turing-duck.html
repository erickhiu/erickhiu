<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Turing Duck</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/tm.css">    
</head>
<body>
    <!-- Include header -->
    <div id="header-placeholder"></div>
    
    <main>

        <!-- Turing Machine Introduction -->
        <section id="turing-machine" class="hero">
            <img src="assets/images/turing-duck-thumbnail.png" alt="Turing Machine Thumbnail" style="width: 10vw;">
            <h2>Turing, please feed Waquackquack!</h2>
            <div class="flush-left">
                <p>
                    Waquackquack the duck has a peculiar habit‚Äîit won‚Äôt walk through the soil until it has eaten all the tasty worms 
                    along the path and the soil is wet enough for it to waddle through. But don‚Äôt worry, the <strong>Turing Machine</strong> is here to help! 
                    It‚Äôs a clever little machine that will do all the work for you, step by step.
                </p>
                <ul>
                    <li>The Turing Machine can only carry <strong>one worm</strong> at a time.</li>
                    <li>It can only look at <strong>one cell ahead</strong> at a time to decide what to do next.</li>
                    <li>
                        Once it finds the lake (üèûÔ∏è), the Turing Machine will fetch water (üíß) to wet the soil.
                    </li>
                </ul>
            
                <h3>What Do You Do?</h3>
                <p>
                    Your role is simple‚Äîyou‚Äôre the <strong>designer of the map</strong>! Place worms (üêõ) on the soil (üü´) 
                    for the Turing machine to collect. The Turing Machine will handle everything else‚Äîdeciding what to do at each step and executing the plan to perfection.
                </p>
            
                <h3>How to Play:</h3>
                <ol>
                    <li>
                        <strong>Design the map:</strong> Click on the soil cells (üü´) to toggle them into food (üêõ). 
                        Place worms wherever you like along the path to the lake (üèûÔ∏è)!
                    </li>
                    <li>
                        <strong>Start the simulation:</strong> Once the path is ready, click <strong>"Start Simulation"</strong> to begin.
                    </li>
                    <li>
                        <strong>Step through the Turing Machine:</strong> Click <strong>"Next Step"</strong> to watch how the Turing Machine processes 
                        the path one cell at a time.
                        <ul>
                            <li>It will check the current cell, pick up worms if present, and move forward.</li>
                            <li>If it reaches the lake, it will fetch water (üíß) to wet the soil.</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Mission accomplished:</strong> Once the soil is wet, Waquackquack will happily waddle to the lake.
                    </li>
                </ol>
            
                <p>
                    As you step through the simulation, notice how the machine behaves differently in each 'state': checking the content of the current cell, deciding what to do at that cell, and moving forward or backward. 
                </p>
                <p>
                    Happy exploring the foundational principles of computation!
                </p>
            </div>
            <div id="tapeContainer"></div>
            <button id="startSimulation">Start Simulation</button>
            <button id="stepThrough" style="display: none; margin-right: 10px;">Step Through</button>
            <button id="automatic" style="display: none;">Automatic</button>            
            <button id="nextStep" style="display: none;">Next Step</button>
            <button id="restartSimulation" style="display: none;">Restart</button>            
            <div id="stateDiagram" style="margin-top: 20px;"></div>
            <!-- Modal Popup -->
            <div id="popupModal" style="display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.5);">
                <div style="position: relative; margin: 10% auto; padding: 20px; background: #fff; width: 300px; border-radius: 10px; text-align: center;">
                    <img src="assets/images/proud-duck.gif" alt="Proud Duck" style="width: 100%; border-radius: 10px;" />
                    <p>Thanks Turing! Waquackquack has reached the lake!</p>
                    <button onclick="closePopup()" style="margin-top: 10px; padding: 5px 10px; background-color: #ffcb05; color: #00274c; border: none; border-radius: 5px; cursor: pointer;">
                        Close
                    </button>
                </div>
            </div>
            <div class="flush-left">
            <h3>For those who are interested (Perfect for EECS 376 folks):</h3>
                <ol>
                    <li>
                        Can you list the seven-tuple that defines this Turing machine?
                    </li>
                    <li>
                        Right now, the Turing machine has a single halting state representing a happy ending where Waquackquack successfully reaches the lake. 
                        How would you modify the Turing machine to include a "reject state," where Waquackquack becomes frustrated and storms off to the lake 
                        because no worms were collected along the way?
                </ol>
            </div>
        </section>
        
    </main>

    <script>
        // Function to dynamically load templates
        async function loadTemplate(id, path) {
            const response = await fetch(path);
            const text = await response.text();
            document.getElementById(id).innerHTML = text;
        }

        // Load header and footer
        loadTemplate('header-placeholder', 'templates/header.html');
    </script>

    <!-- Link to the Turing Machine JavaScript file -->
    <script src="javascript/tm.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>


    <!-- Event Listener for Start Simulation button -->
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            document.getElementById("startSimulation").addEventListener("click", startSimulation);
        });
    </script>
</body>
</html>
