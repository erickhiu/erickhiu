<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>About Me - Eric Khiu</title>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <main>
        <div class="two-column-layout">
            <!-- Left Column: My Skillbox -->
            <section class="about-header">
                <h2>My Skillbox</h2>
                <ul>
                    <li><strong>Programming Languages:</strong> <span id="programming-languages"></span></li>
                    <li><strong>Python Packages:</strong> <span id="python-packages"></span></li>
                    <li><strong>Languages:</strong> <span id="languages"></span></li>
                    <li><strong>Tools:</strong> <span id="tools"></span></li>
                </ul>
            </section>

            <!-- Right Column: Main Content -->
            <div class="main-wrapper">
                <section id="education">
                    <h2>Education</h2>
                </section>

                <section id="work-experience">
                    <h2>Work Experience</h2>
                </section>

                <section id="research-experience">
                    <h2>Research Experience</h2>
                </section>
            </div>
        </div>
    </main>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Function to dynamically load templates
        async function loadTemplate(id, path) {
            const response = await fetch(path);
            const text = await response.text();
            document.getElementById(id).innerHTML = text;
        }

        // Load header and footer
        loadTemplate('header-placeholder', 'templates/header.html');
        loadTemplate('footer-placeholder', 'templates/footer.html');

        // Load and Render Data from JSON
        async function loadAboutData() {
            const response = await fetch('data/about.json');
            const data = await response.json();
            renderSkillbox(data.skills);
            renderEducation(data.education);
            renderWorkExperience(data.work_experience);
            renderResearchExperience(data.research_experience);
        }

        // Render Skills in the Left Column
        function renderSkillbox(skills) {
            document.getElementById('programming-languages').textContent = skills.programming_languages;
            document.getElementById('python-packages').textContent = skills.python_packages;
            document.getElementById('languages').textContent = skills.languages;
            document.getElementById('tools').textContent = skills.tools;
        }

        // Render Education in the Right Column
        function renderEducation(education) {
            const section = document.getElementById('education');
            education.forEach(edu => {
                section.innerHTML += `
                    <div class="experience-item">
                        <img src="assets/images/about/${edu.logo}" alt="${edu.institution} Logo" class="experience-logo">
                        <div>
                            <h3>${edu.institution}</h3>
                            <div class="role-and-dates">
                                <p>${edu.degree}</p>
                                <p class="date-align">${edu.start_date} - ${edu.end_date}</p>
                            </div>
                            <ul>
                                ${edu.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
        }

        // Render Work Experience in the Right Column
        function renderWorkExperience(workExperience) {
            const section = document.getElementById('work-experience');
            workExperience.forEach(work => {
                section.innerHTML += `
                    <div class="experience-item">
                        <img src="assets/images/about/${work.logo}" alt="${work.organization} Logo" class="experience-logo">
                        <div>
                            <h3>${work.organization}</h3>
                            <div class="role-and-dates">
                                <p>${work.role}</p>
                                <p class="date-align">${work.start_date} - ${work.end_date}</p>
                            </div>
                            <ul>
                                ${work.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
        }

        // Render Research Experience in the Right Column
        function renderResearchExperience(researchExperience) {
            const section = document.getElementById('research-experience');
            researchExperience.forEach(research => {
                section.innerHTML += `
                    <div class="experience-item">
                        <img src="assets/images/about/${research.logo}" alt="${research.organization} Logo" class="experience-logo">
                        <div>
                            <h3>${research.organization}</h3>
                            <div class="role-and-dates">
                                <p>${research.role}</p>
                                <p class="date-align">${research.start_date} - ${research.end_date}</p>
                            </div>
                            <ul>
                                ${research.details.map(detail => `<li>${detail}</li>`).join('')}
                            </ul>
                        </div>
                    </div>
                `;
            });
        }

        // Load data on page load
        loadAboutData();
    </script>
</body>
</html>
